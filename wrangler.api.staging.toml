name = "msgstats-api-staging"
compatibility_date = "2026-01-01"
compatibility_flags = ["nodejs_compat"]
main = "workers/api/worker.ts"

[vars]
META_REDIRECT_URI = "https://staging.msgstats.from-trees.com/api/auth/callback"

[[d1_databases]]
binding = "DB"
database_name = "msgstats-db-staging"
database_id = "REPLACE_WITH_STAGING_DB_ID"

[[durable_objects.bindings]]
name = "SYNC_RUNS_HUB"
class_name = "SyncRunsHub"
script_name = "msgstats-web-staging"

[queues]

[[queues.producers]]
binding = "SYNC_QUEUE"
queue = "msgstats-sync-staging"

[[queues.consumers]]
queue = "msgstats-sync-staging"
max_batch_size = 1

[observability]
[observability.logs]
enabled = true
invocation_logs = true
